{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api-call.service\";\nimport * as i2 from \"../services/general-func.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../loader/loader.component\";\nfunction AdminTagPanelComponent_app_loader_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loader\");\n  }\n}\nfunction AdminTagPanelComponent_div_2_form_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\");\n    i0.ɵɵelement(1, \"input\", 15);\n    i0.ɵɵelementStart(2, \"i\", 16);\n    i0.ɵɵlistener(\"click\", function AdminTagPanelComponent_div_2_form_16_Template_i_click_2_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.enableOrSubmit($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"i\", 17);\n    i0.ɵɵlistener(\"click\", function AdminTagPanelComponent_div_2_form_16_Template_i_click_3_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.removeTag($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const el_r3 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    i0.ɵɵclassMapInterpolate1(\"myForm form\", i_r4, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"id\", el_r3);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"inp\", i_r4, \"\");\n    i0.ɵɵpropertyInterpolate(\"value\", el_r3);\n  }\n}\nfunction AdminTagPanelComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"h1\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"form\", 5)(5, \"div\", 6);\n    i0.ɵɵelement(6, \"input\", 7)(7, \"i\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 9)(9, \"i\", 10);\n    i0.ɵɵlistener(\"click\", function AdminTagPanelComponent_div_2_Template_i_click_9_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.addTag());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function AdminTagPanelComponent_div_2_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.submitNewTag());\n    });\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"div\", 12)(13, \"h1\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 13);\n    i0.ɵɵtemplate(16, AdminTagPanelComponent_div_2_form_16_Template, 4, 6, \"form\", 14);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.inpLen > 1 ? ctx_r1.gFunc.label.tagPage.createTags : ctx_r1.gFunc.label.tagPage.createTag);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(ctx_r1.inpLen > 1 ? ctx_r1.gFunc.label.tagPage.addTags : ctx_r1.gFunc.label.tagPage.addTag);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.gFunc.label.tagPage.modifyOrDelete);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.tags.categories);\n  }\n}\nfunction enableEditTag(event) {\n  event.target.classList.remove(\"fa-pencil\");\n  event.target.classList.add(\"fa-check\");\n  event.target.style.backgroundColor = \"var(--ok-col)\";\n  event.target.parentNode.firstChild.readOnly = false;\n}\nexport let AdminTagPanelComponent = /*#__PURE__*/(() => {\n  class AdminTagPanelComponent {\n    //handle the deletion of the \"add tag element\" from the list \n    onClick($event) {\n      if ($event.target.classList.contains(\"delete\") && $event.target.parentNode.firstChild.name.substring(0, 3) == \"inp\" && $event.target.parentNode.firstChild.name != \"inp1\") {\n        $event.target.parentNode.classList.add(\"wrapFadeOut\");\n        setTimeout(() => {\n          $event.target.parentNode.remove();\n        }, 500);\n      } else if ($event.target.classList.contains(\"pencil\")) enableEditTag($event);\n      if ($event.target.classList.contains(\"fa-check\")) console.log($event.target.parentNode.firstChild.value); //api for edit tag value\n    }\n    //create a new \"add tag element\" and append it to the list so that user can add \n    //as many tag as the want all at once\n    addTag() {\n      const toAppend = document.querySelector(\".createBox\");\n      const newInp = document.querySelector(\".myInput\")?.cloneNode();\n      const newDel = document.querySelector(\".delete\")?.cloneNode();\n      const newTagLine = document.querySelector(\".inputWrap\")?.cloneNode();\n      this.inpLen = document.querySelectorAll(\".myInput\").length + 1;\n      newInp.value = \"\";\n      newInp.name = \"inp\" + this.counter;\n      newInp.classList.add(\"inp\" + this.counter++);\n      newTagLine.appendChild(newInp);\n      newTagLine.appendChild(newDel);\n      toAppend.appendChild(newTagLine);\n    }\n    //collect all the new tags inserted pack togheted and send it all to backend\n    submitNewTag() {\n      const inputList = document.querySelectorAll('.myInput');\n      let data = {\n        'categories': []\n      };\n      for (let i = 0; i < inputList.length; i++) data.categories.push(inputList[i].value.trim());\n      this.api.addTags(data).then(res => {\n        if (res) {\n          this.isLoaded = false;\n          this.api.getTags().then(data => {\n            this.tags = data;\n            this.isLoaded = true;\n          }).catch(err => {\n            console.log(\"ERROR RETRIEVING TAGS \", err);\n          });\n        } else alert(\"Error adding tags...\");\n      });\n    }\n    //on first click make the input editable on second click submit the call to modify the selected tag\n    enableOrSubmit($event) {\n      if ($event.target.classList.contains(\"fa-check\")) {\n        this.api.modifyTag($event.target.parentNode.firstChild.id, $event.target.parentNode.firstChild.value).then(res => {\n          if (res) {\n            this.isLoaded = false;\n            this.api.getTags().then(data => {\n              this.tags = data;\n              this.isLoaded = true;\n            }).catch(err => {\n              console.log(\"ERROR RETRIEVING TAGS \", err);\n            });\n          } else {\n            alert(\"Error Editing \" + $event.target.parentNode.firstChild.value);\n          }\n        });\n      }\n    }\n    //handle the remove of single tag ask to confirm \n    removeTag($event) {\n      if (confirm(\"Do you really want to delete this tag\")) {\n        this.api.removeTag($event.target.parentNode.firstChild.value).then(res => {\n          if (res) {\n            this.isLoaded = false;\n            this.api.getTags().then(data => {\n              this.tags = data;\n              this.isLoaded = true;\n            }).catch(err => {\n              console.log(\"ERROR RETRIEVING TAGS \", err);\n            });\n          } else alert(\"Error removing \" + $event.target.parentNode.firstChild.value);\n        }).catch(err => {\n          console.log(\"REMOVING TAG: \", err);\n        });\n      }\n    }\n    constructor(api, gFunc) {\n      this.api = api;\n      this.gFunc = gFunc;\n      this.inpLen = 1;\n      this.counter = 2;\n      this.isLoaded = false;\n      this.tags = {\n        'categories': []\n      };\n      this.api.getTags().then(data => {\n        this.tags = data;\n        this.isLoaded = true;\n      }).catch(err => {\n        console.log(\"ERROR RETRIEVING TAGS \", err);\n      });\n    }\n    static #_ = this.ɵfac = function AdminTagPanelComponent_Factory(t) {\n      return new (t || AdminTagPanelComponent)(i0.ɵɵdirectiveInject(i1.ApiCallService), i0.ɵɵdirectiveInject(i2.GeneralFuncService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AdminTagPanelComponent,\n      selectors: [[\"app-admin-tag-panel\"]],\n      hostBindings: function AdminTagPanelComponent_HostBindings(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵlistener(\"click\", function AdminTagPanelComponent_click_HostBindingHandler($event) {\n            return ctx.onClick($event);\n          });\n        }\n      },\n      decls: 3,\n      vars: 2,\n      consts: [[1, \"bigContainer\"], [4, \"ngIf\"], [\"class\", \"container\", 4, \"ngIf\"], [1, \"container\"], [1, \"createContainer\"], [1, \"createBox\"], [1, \"inputWrap\"], [\"name\", \"inp1\", \"placeholder\", \"\\u00A0\\uF02B\", \"type\", \"text\", 1, \"myInput\", \"inp1\"], [1, \"delete\", \"fa-solid\", \"fa-delete-left\"], [1, \"buttonsContainer\"], [1, \"add\", \"fa-solid\", \"fa-plus\", 3, \"click\"], [3, \"click\"], [1, \"modRemContainer\"], [1, \"modRemBox\"], [3, \"class\", 4, \"ngFor\", \"ngForOf\"], [\"readonly\", \"\", \"type\", \"text\", 3, \"id\", \"name\", \"value\"], [1, \"pencil\", \"fa-solid\", \"fa-pencil\", 3, \"click\"], [1, \"trash\", \"fa-solid\", \"fa-trash\", 3, \"click\"]],\n      template: function AdminTagPanelComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, AdminTagPanelComponent_app_loader_1_Template, 1, 0, \"app-loader\", 1);\n          i0.ɵɵtemplate(2, AdminTagPanelComponent_div_2_Template, 17, 4, \"div\", 2);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoaded);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoaded);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i5.LoaderComponent],\n      styles: [\".bigContainer[_ngcontent-%COMP%]{width:90svw;height:89svh;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]{width:90svw;height:89svh;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);display:flex;justify-content:space-around;align-items:center;font-family:Arial,Helvetica,sans-serif}.createContainer[_ngcontent-%COMP%], .modRemContainer[_ngcontent-%COMP%]{width:48%;height:95%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding-bottom:1svw;border-radius:15px;border:3px solid var(--bg-col)}h1[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0;box-sizing:border-box;height:10%;width:100%;background-color:var(--bg-col);color:#fff;border-radius:10px;border:3px solid var(--bg-col)}.createBox[_ngcontent-%COMP%]{width:90%;height:70%;box-sizing:border-box;padding:1svw;display:flex;flex-wrap:wrap;justify-content:center;overflow:scroll}.inputWrap[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--bg-col);width:95%;height:22%;justify-content:space-around;box-sizing:border-box;padding:1svw;border-radius:10px;margin-top:1svw;margin-bottom:1svw;transition:.5s}.wrapFadeOut[_ngcontent-%COMP%]{opacity:0}.inputWrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80%;height:80%;border-radius:7px;border:none;outline:none;display:flex;align-items:center;font-size:x-large;font-weight:700;background-color:#fff;color:var(--det-col)}[_ngcontent-%COMP%]::placeholder{font-family:FontAwesome;color:var(--det-col)}.delete[_ngcontent-%COMP%]{color:var(--err-col);font-size:xx-large}.buttonsContainer[_ngcontent-%COMP%]{width:100%;height:10%;display:flex;justify-content:space-around;align-items:center}.add[_ngcontent-%COMP%]{width:10%;height:90%;background-color:var(--bg-col);border-radius:5px;color:#fff;display:flex;justify-content:center;align-items:center;box-sizing:border-box;transition:.6s}.add[_ngcontent-%COMP%]:hover{transform:scale(1.05);cursor:pointer;background-color:#fff;color:var(--bg-col);border:3px solid var(--bg-col)}.buttonsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40%;height:90%;background-color:#fff;color:var(--bg-col);border:3px solid var(--bg-col);box-sizing:border-box;border-radius:10px;font-weight:900;font-size:larger;transition:.6s}.buttonsContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.05);background-color:var(--bg-col);color:#fff;cursor:pointer}.modRemBox[_ngcontent-%COMP%]{width:90%;height:90%;box-sizing:border-box;padding:1svw;overflow:scroll;display:flex;flex-wrap:wrap;justify-content:center}.myForm[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60%;height:90%;border-radius:8px;border:none;outline:none;font-size:larger;font-weight:800;color:var(--det-col)}.myForm[_ngcontent-%COMP%]{width:90%;height:12%;background-color:var(--bg-col);margin-top:1svw;margin-bottom:1svw;display:flex;border-radius:10px;align-items:center;box-sizing:border-box;padding:.7svw;justify-content:space-around}.pencil[_ngcontent-%COMP%]{width:10%;height:90%;background-color:var(--det-col);display:flex;justify-content:center;align-items:center;border-radius:5px;color:#fff;transition:.7s}.trash[_ngcontent-%COMP%]{width:10%;height:90%;background-color:var(--err-col);display:flex;justify-content:center;align-items:center;border-radius:5px;color:#fff}@media screen and (max-width: 1000px){.bigContainer[_ngcontent-%COMP%]{width:100svw;height:79svh}.container[_ngcontent-%COMP%]{align-self:flex-start;width:100svw;height:89svh;flex-direction:column;justify-content:flex-start;overflow:scroll}.createContainer[_ngcontent-%COMP%]{width:98svw;min-height:80svh;margin-top:1svh;margin-bottom:1svh}.buttonsContainer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20%}.modRemBox[_ngcontent-%COMP%]{padding:0}.modRemContainer[_ngcontent-%COMP%]{width:98svw;min-height:80svh;margin-top:1svh;margin-bottom:1svh}.myForm[_ngcontent-%COMP%]{width:100%;height:10svh}.myForm[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:65%}.myForm[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{height:80%;width:15%}}\"]\n    });\n  }\n  return AdminTagPanelComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}